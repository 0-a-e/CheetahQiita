import{b as o}from"./p-9825fcb7.js";let n=0;const t=new WeakMap,e=o=>({create:n=>l(o,n),dismiss:(n,t,e)=>f(document,n,t,o,e),getTop:async()=>y(document,o)}),a=e("ion-alert"),s=e("ion-action-sheet"),i=e("ion-loading"),r=e("ion-modal"),c=e("ion-picker"),d=e("ion-popover"),u=e("ion-toast"),p=o=>{const t=document;m(t);const e=n++;o.overlayIndex=e,o.hasAttribute("id")||(o.id=`ion-overlay-${e}`)},l=(o,n)=>customElements.whenDefined(o).then(()=>{const t=document,e=t.createElement(o);return e.classList.add("overlay-hidden"),Object.assign(e,n),b(t).appendChild(e),e.componentOnReady()}),m=o=>{0===n&&(n=1,o.addEventListener("focusin",n=>{const t=y(o);if(t&&t.backdropDismiss&&!B(t,n.target)){const o=t.querySelector("input,button");o&&o.focus()}}),o.addEventListener("ionBackButton",n=>{const t=y(o);t&&t.backdropDismiss&&n.detail.register(100,()=>t.dismiss(void 0,P))}),o.addEventListener("keyup",n=>{if("Escape"===n.key){const n=y(o);n&&n.backdropDismiss&&n.dismiss(void 0,P)}}))},f=(o,n,t,e,a)=>{const s=y(o,e,a);return s?s.dismiss(n,t):Promise.reject("overlay does not exist")},y=(o,n,t)=>{const e=((o,n)=>(void 0===n&&(n="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(o.querySelectorAll(n)).filter(o=>o.overlayIndex>0)))(o,n);return void 0===t?e[e.length-1]:e.find(o=>o.id===t)},v=async(n,t,e,a,s)=>{if(n.presented)return;n.presented=!0,n.willPresent.emit();const i=n.enterAnimation?n.enterAnimation:o.get(t,"ios"===n.mode?e:a);await k(n,i,n.el,s)&&n.didPresent.emit()},h=async(n,e,a,s,i,r,c)=>{if(!n.presented)return!1;n.presented=!1;try{n.willDismiss.emit({data:e,role:a});const d=n.leaveAnimation?n.leaveAnimation:o.get(s,"ios"===n.mode?i:r);void 0!==d&&await k(n,d,n.el,c),n.didDismiss.emit({data:e,role:a}),t.delete(n)}catch(d){console.error(d)}return n.el.remove(),!0},b=o=>o.querySelector("ion-app")||o.body,k=async(n,e,a,s)=>{a.classList.remove("overlay-hidden");const i=e(a.shadowRoot||n.el,s);n.animated&&o.getBoolean("animated",!0)||i.duration(0),n.keyboardClose&&i.beforeAddWrite(()=>{const o=a.ownerDocument.activeElement;o&&o.matches("input, ion-input, ion-textarea")&&o.blur()});const r=t.get(n)||[];return t.set(n,[...r,i]),await i.play(),!0},w=(o,n)=>{let t;const e=new Promise(o=>t=o);return g(o,n,o=>{t(o.detail)}),e},g=(o,n,t)=>{const e=a=>{o.removeEventListener(n,e),t(a)};o.addEventListener(n,e)},x=o=>"cancel"===o||o===P,B=(o,n)=>{for(;n;){if(n===o)return!0;n=n.parentElement}return!1},j=o=>o(),E=(n,t)=>{if("function"==typeof n)return o.get("_zoneGate",j)(()=>{try{return n(t)}catch(o){console.error(o)}})},P="backdrop";export{P as B,a,s as b,d as c,p as d,v as e,h as f,w as g,t as h,x as i,i as l,r as m,c as p,E as s,u as t};